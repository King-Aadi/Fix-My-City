[{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\CitizenLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\EmployeeLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\report\\FaceVerificationStep.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`stopCamera` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\report\\FaceVerificationStep.tsx:22:13\n  20 |     useEffect(() => {\n  21 |         return () => {\n> 22 |             stopCamera();\n     |             ^^^^^^^^^^ `stopCamera` accessed before it is declared\n  23 |         };\n  24 |     }, []);\n  25 |\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\report\\FaceVerificationStep.tsx:41:5\n  39 |     };\n  40 |\n> 41 |     const stopCamera = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 42 |         if (streamRef.current) {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 43 |             streamRef.current.getTracks().forEach(track => track.stop());\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 44 |             streamRef.current = null;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |         setIsCameraOpen(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |     };\n     | ^^^^^^^ `stopCamera` is declared here\n  48 |\n  49 |     const capturePhoto = () => {\n  50 |         if (videoRef.current && canvasRef.current) {","line":22,"column":13,"nodeType":null,"endLine":22,"endColumn":23}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { Camera, Check, ShieldCheck, RefreshCw } from 'lucide-react';\r\nimport Button from '../../components/ui/Button';\r\n\r\ninterface FaceVerificationStepProps {\r\n    onNext: (data: { faceImage: File }) => void;\r\n    onBack: () => void;\r\n}\r\n\r\nconst FaceVerificationStep: React.FC<FaceVerificationStepProps> = ({ onNext, onBack }) => {\r\n    const [image, setImage] = useState<File | null>(null);\r\n    const [preview, setPreview] = useState<string | null>(null);\r\n    const [verifying, setVerifying] = useState(false);\r\n    const [verified, setVerified] = useState(false);\r\n    const [isCameraOpen, setIsCameraOpen] = useState(false);\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const streamRef = useRef<MediaStream | null>(null);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            stopCamera();\r\n        };\r\n    }, []);\r\n\r\n    const startCamera = async () => {\r\n        setIsCameraOpen(true);\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });\r\n            streamRef.current = stream;\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = stream;\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error accessing camera:\", err);\r\n            alert(\"Unable to access camera. Please check permissions.\");\r\n            setIsCameraOpen(false);\r\n        }\r\n    };\r\n\r\n    const stopCamera = () => {\r\n        if (streamRef.current) {\r\n            streamRef.current.getTracks().forEach(track => track.stop());\r\n            streamRef.current = null;\r\n        }\r\n        setIsCameraOpen(false);\r\n    };\r\n\r\n    const capturePhoto = () => {\r\n        if (videoRef.current && canvasRef.current) {\r\n            const video = videoRef.current;\r\n            const canvas = canvasRef.current;\r\n            canvas.width = video.videoWidth;\r\n            canvas.height = video.videoHeight;\r\n            const context = canvas.getContext('2d');\r\n            if (context) {\r\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n                canvas.toBlob((blob) => {\r\n                    if (blob) {\r\n                        const file = new File([blob], \"selfie.jpg\", { type: \"image/jpeg\" });\r\n                        setImage(file);\r\n                        setPreview(canvas.toDataURL('image/jpeg'));\r\n                        stopCamera();\r\n                        verifyFace();\r\n                    }\r\n                }, 'image/jpeg');\r\n            }\r\n        }\r\n    };\r\n\r\n    const verifyFace = () => {\r\n        setVerifying(true);\r\n        // Mock Verification\r\n        setTimeout(() => {\r\n            setVerifying(false);\r\n            setVerified(true);\r\n        }, 2000);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        if (verified && image) {\r\n            onNext({ faceImage: image });\r\n        }\r\n    };\r\n\r\n    const retake = () => {\r\n        setImage(null);\r\n        setPreview(null);\r\n        setVerified(false);\r\n        startCamera();\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-slide-up\">\r\n            <div className=\"text-center space-y-2\">\r\n                <h2 className=\"text-2xl font-bold text-gray-900\">Verify Identity</h2>\r\n                <p className=\"text-gray-500\">Capture a live selfie to confirm your report.</p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col items-center justify-center\">\r\n                {!isCameraOpen && !preview && (\r\n                    <div\r\n                        className=\"bg-gray-50 h-64 w-64 mx-auto rounded-full flex flex-col items-center justify-center border-4 border-dashed border-gray-200 cursor-pointer overflow-hidden relative group hover:border-green-400 transition-all duration-300\"\r\n                        onClick={startCamera}\r\n                    >\r\n                        <div className=\"absolute inset-0 bg-white opacity-0 group-hover:opacity-50 transition-opacity\"></div>\r\n                        <Camera className=\"h-16 w-16 text-gray-300 group-hover:text-green-500 transition-colors z-10\" />\r\n                        <p className=\"text-sm text-gray-500 font-medium mt-4 z-10\">Start Camera</p>\r\n                    </div>\r\n                )}\r\n\r\n                {isCameraOpen && (\r\n                    <div className=\"relative h-64 w-64 rounded-full overflow-hidden border-4 border-green-500 shadow-2xl bg-black\">\r\n                        <video ref={videoRef} autoPlay playsInline muted className=\"w-full h-full object-cover transform scale-x-[-1]\" />\r\n                    </div>\r\n                )}\r\n\r\n                {preview && (\r\n                    <div className=\"relative h-64 w-64 mx-auto rounded-full overflow-hidden border-4 border-white shadow-2xl ring-4 ring-gray-100\">\r\n                        <img src={preview} alt=\"Face preview\" className=\"w-full h-full object-cover transform scale-x-[-1]\" />\r\n                        {verifying && (\r\n                            <div className=\"absolute inset-0 bg-black/60 flex flex-col items-center justify-center text-white backdrop-blur-sm\">\r\n                                <ShieldCheck className=\"h-10 w-10 animate-pulse mb-2 text-blue-400\" />\r\n                                <span className=\"text-sm font-medium tracking-wider\">VERIFYING...</span>\r\n                            </div>\r\n                        )}\r\n                        {verified && !verifying && (\r\n                            <div className=\"absolute inset-0 bg-green-500/20 flex items-center justify-center backdrop-blur-[2px]\">\r\n                                <div className=\"bg-white rounded-full p-4 shadow-lg animate-bounce\">\r\n                                    <Check className=\"h-8 w-8 text-green-600\" />\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n\r\n                <canvas ref={canvasRef} className=\"hidden\" />\r\n            </div>\r\n\r\n            <div className=\"flex justify-center\">\r\n                {isCameraOpen && (\r\n                    <button\r\n                        onClick={capturePhoto}\r\n                        className=\"bg-red-600 text-white rounded-full p-4 shadow-lg hover:bg-red-700 hover:scale-110 transition-all\"\r\n                    >\r\n                        <div className=\"h-4 w-4 bg-white rounded-full\"></div>\r\n                    </button>\r\n                )}\r\n\r\n                {preview && !verifying && (\r\n                    <button\r\n                        onClick={retake}\r\n                        className=\"flex items-center text-sm font-medium text-gray-600 hover:text-gray-900 bg-gray-100 px-4 py-2 rounded-full hover:bg-gray-200 transition-colors\"\r\n                    >\r\n                        <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n                        Retake Photo\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {verified && (\r\n                <div className=\"bg-green-50 border border-green-200 p-4 rounded-xl flex items-center justify-center text-center animate-fade-in shadow-sm\">\r\n                    <ShieldCheck className=\"h-5 w-5 text-green-600 mr-2\" />\r\n                    <span className=\"text-green-800 font-semibold\">Face Verified & Live Capture Confirmed</span>\r\n                </div>\r\n            )}\r\n\r\n            <div className=\"flex gap-4\">\r\n                <Button onClick={onBack} variant=\"outline\" className=\"flex-1\">\r\n                    Back\r\n                </Button>\r\n                <Button\r\n                    onClick={handleNext}\r\n                    disabled={!verified}\r\n                    variant=\"secondary\"\r\n                    className=\"flex-1\"\r\n                >\r\n                    Submit Report\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FaceVerificationStep;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\report\\LocationStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\report\\PhotoStep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ui\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ui\\GoogleMapPicker.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ui\\GoogleMapPicker.tsx:35:13\n  33 |     useEffect(() => {\n  34 |         if (initialLat && initialLng) {\n> 35 |             setMarkerPos({ lat: initialLat, lng: initialLng });\n     |             ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |         }\n  37 |     }, [initialLat, initialLng]);\n  38 |","line":35,"column":13,"nodeType":null,"endLine":35,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect } from 'react';\r\nimport { GoogleMap, useJsApiLoader, Marker } from '@react-google-maps/api';\r\n\r\ninterface MapPickerProps {\r\n    initialLat?: number;\r\n    initialLng?: number;\r\n    onLocationSelect: (lat: number, lng: number) => void;\r\n}\r\n\r\nconst containerStyle = {\r\n    width: '100%',\r\n    height: '100%',\r\n    borderRadius: '1rem'\r\n};\r\n\r\nconst defaultCenter = {\r\n    lat: 12.9716,\r\n    lng: 77.5946\r\n};\r\n\r\n// **IMPORTANT**: Replace with your valid Google Maps API Key\r\n// You can also set this in a .env file as VITE_GOOGLE_MAPS_API_KEY\r\nconst GOOGLE_MAPS_API_KEY = import.meta.env.VITE_GOOGLE_MAPS_API_KEY || '';\r\n\r\nconst GoogleMapPicker: React.FC<MapPickerProps> = ({ initialLat, initialLng, onLocationSelect }) => {\r\n    const { isLoaded, loadError } = useJsApiLoader({\r\n        id: 'google-map-script',\r\n        googleMapsApiKey: GOOGLE_MAPS_API_KEY\r\n    });\r\n\r\n    const [markerPos, setMarkerPos] = useState(defaultCenter);\r\n\r\n    useEffect(() => {\r\n        if (initialLat && initialLng) {\r\n            setMarkerPos({ lat: initialLat, lng: initialLng });\r\n        }\r\n    }, [initialLat, initialLng]);\r\n\r\n    const onLoad = useCallback(function callback(map: google.maps.Map) {\r\n        // map usage if needed, or leave empty but keep signature\r\n        // rendering marker dynamically does not strictly require map ref here if using Marker component\r\n        // To silence unused variable warning:\r\n        console.log(\"Map Loaded\", map.getZoom());\r\n    }, []);\r\n\r\n    const onUnmount = useCallback(function callback(map: google.maps.Map) {\r\n        // Cleanup\r\n        console.log(\"Map Unmounted\", map.getZoom());\r\n    }, []);\r\n\r\n    const handleMapClick = (e: google.maps.MapMouseEvent) => {\r\n        if (e.latLng) {\r\n            const lat = e.latLng.lat();\r\n            const lng = e.latLng.lng();\r\n            setMarkerPos({ lat, lng });\r\n            onLocationSelect(lat, lng);\r\n        }\r\n    };\r\n\r\n    if (loadError) {\r\n        return (\r\n            <div className=\"h-full w-full flex items-center justify-center bg-gray-100 text-red-500 p-4 text-center\">\r\n                Error loading Google Maps. Please check your API Key.\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!isLoaded) {\r\n        return <div className=\"h-full w-full flex items-center justify-center bg-gray-100\">Loading Map...</div>;\r\n    }\r\n\r\n    return (\r\n        <GoogleMap\r\n            mapContainerStyle={containerStyle}\r\n            center={markerPos}\r\n            zoom={15}\r\n            onLoad={onLoad}\r\n            onUnmount={onUnmount}\r\n            onClick={handleMapClick}\r\n            options={{\r\n                streetViewControl: false,\r\n                mapTypeControl: false,\r\n                fullscreenControl: false,\r\n            }}\r\n        >\r\n            <Marker position={markerPos} />\r\n        </GoogleMap>\r\n    );\r\n};\r\n\r\nexport default GoogleMapPicker;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ui\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ui\\MapPicker.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[268,271],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[268,271],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\components\\ui\\MapPicker.tsx:44:13\n  42 |     useEffect(() => {\n  43 |         if (initialLat && initialLng) {\n> 44 |             setPosition({ lat: initialLat, lng: initialLng });\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  45 |         }\n  46 |     }, [initialLat, initialLng]);\n  47 |","line":44,"column":13,"nodeType":null,"endLine":44,"endColumn":24}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { MapContainer, TileLayer, Marker, useMapEvents, useMap } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix Leaflet icon issue\r\ndelete (L.Icon.Default.prototype as any)._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\ninterface MapPickerProps {\r\n    initialLat?: number;\r\n    initialLng?: number;\r\n    onLocationSelect: (lat: number, lng: number) => void;\r\n}\r\n\r\nconst LocationMarker: React.FC<{ onSelect: (lat: number, lng: number) => void, position: { lat: number; lng: number } | null }> = ({ onSelect, position }) => {\r\n    useMapEvents({\r\n        click(e) {\r\n            onSelect(e.latlng.lat, e.latlng.lng);\r\n        },\r\n    });\r\n\r\n    return position ? <Marker position={position} /> : null;\r\n};\r\n\r\nconst Recenter: React.FC<{ lat: number; lng: number }> = ({ lat, lng }) => {\r\n    const map = useMap();\r\n    useEffect(() => {\r\n        map.setView([lat, lng]);\r\n    }, [lat, lng, map]);\r\n    return null;\r\n};\r\n\r\nconst MapPicker: React.FC<MapPickerProps> = ({ initialLat = 12.9716, initialLng = 77.5946, onLocationSelect }) => {\r\n    const [position, setPosition] = useState<{ lat: number; lng: number } | null>(null);\r\n\r\n    // If initial props change (e.g. from geolocation), update internal state\r\n    useEffect(() => {\r\n        if (initialLat && initialLng) {\r\n            setPosition({ lat: initialLat, lng: initialLng });\r\n        }\r\n    }, [initialLat, initialLng]);\r\n\r\n    const handleSelect = (lat: number, lng: number) => {\r\n        setPosition({ lat, lng });\r\n        // Reverse Geocoding would happen here in a real app to get address\r\n        onLocationSelect(lat, lng);\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-full w-full relative z-0\">\r\n            <MapContainer\r\n                center={[initialLat, initialLng]}\r\n                zoom={13}\r\n                className=\"h-full w-full rounded-xl\"\r\n                style={{ height: '100%', width: '100%' }}\r\n            >\r\n                <TileLayer\r\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                    attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                />\r\n                <LocationMarker onSelect={handleSelect} position={position} />\r\n                {position && <Recenter lat={position.lat} lng={position.lng} />}\r\n            </MapContainer>\r\n            <div className=\"absolute bottom-2 left-2 bg-white px-2 py-1 rounded shadow text-xs z-[1000] opacity-80\">\r\n                Tap map to pin location\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MapPicker;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\context\\AuthContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\context\\AuthContext.tsx:24:13\n  22 |         const storedUser = db.getCurrentUser();\n  23 |         if (storedUser) {\n> 24 |             setUser(storedUser);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  25 |         }\n  26 |         setIsLoading(false);\n  27 |     }, []);","line":24,"column":13,"nodeType":null,"endLine":24,"endColumn":20},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":80,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":80,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { db } from '../services/storage';\r\nimport type { User } from '../services/storage';\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    login: (email: string, password: string) => Promise<void>;\r\n    register: (user: User) => Promise<void>;\r\n    logout: () => void;\r\n    updateProfile: (data: Partial<User>) => void;\r\n    isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        // Check for active session on load\r\n        const storedUser = db.getCurrentUser();\r\n        if (storedUser) {\r\n            setUser(storedUser);\r\n        }\r\n        setIsLoading(false);\r\n    }, []);\r\n\r\n    const login = async (email: string, password: string) => {\r\n        // Artificial delay for UX\r\n        await new Promise(resolve => setTimeout(resolve, 800));\r\n        const loggedUser = db.login(email, password);\r\n        setUser(loggedUser);\r\n    };\r\n\r\n    const register = async (newUser: User) => {\r\n        await new Promise(resolve => setTimeout(resolve, 800));\r\n        db.saveUser(newUser);\r\n    };\r\n\r\n    const updateProfile = (data: Partial<User>) => {\r\n        if (user) {\r\n            const updatedUser = { ...user, ...data };\r\n            db.updateUser(updatedUser); // We need to ensure db supports this, but db.saveUser overwrites so it might work if ID is same. \r\n            // Actually db.saveUser checks email. Better to have specific update. \r\n            // Let's assume for now db.saveUser works if we just re-save, OR we implement db.updateUser separately.\r\n            // Checking storage.ts in my head... it has saveUser(user).\r\n            // Let's rely on saveUser overwriting if ID matches? storage.ts logic: \"existing = users.find(u => u.email === user.email)... if existing return error\". \r\n            // Ah, storage.ts prevents duplicates. We need a specific Update method in storage.ts or AuthContext handling it carefully.\r\n            // Let's add db.updateUser to storage.ts first? No, let's just cheat and implement it here if storage allows.\r\n            // WAit, I can edit storage.ts too.\r\n            // For now let's implement the context method and then fix storage.ts if needed.\r\n\r\n            // Actually, let's look at storage.ts logic. \r\n            // \"if (existing) throw new Error\". \r\n            // So we can't just call register/saveUser.\r\n\r\n            // I will implement a quick db helper here or assume I'll fix storage next.\r\n            // Let's fix storage.ts in the next step.\r\n\r\n            setUser(updatedUser);\r\n            // We'll trust the next step to add db.updateUser\r\n            db.updateUser(updatedUser);\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        db.logout();\r\n        setUser(null);\r\n        window.location.href = '/'; // Hard redirect to clear any state\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, login, register, logout, updateProfile, isLoading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\LandingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\UserSelection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\citizen\\Login.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`generateCaptcha` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\citizen\\Login.tsx:23:9\n  21 |     // Generate Captcha on Mount\n  22 |     React.useEffect(() => {\n> 23 |         generateCaptcha();\n     |         ^^^^^^^^^^^^^^^ `generateCaptcha` accessed before it is declared\n  24 |     }, []);\n  25 |\n  26 |     const generateCaptcha = () => {\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\citizen\\Login.tsx:26:5\n  24 |     }, []);\n  25 |\n> 26 |     const generateCaptcha = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 27 |         const num1 = Math.floor(Math.random() * 10); // 0-9\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 28 |         const num2 = Math.floor(Math.random() * 10); // 0-9\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 29 |         setCaptcha({\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 30 |             problem: `${num1} + ${num2}`,\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 31 |             answer: num1 + num2\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 32 |         });\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 33 |         setEnteredCaptcha('');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 34 |     };\n     | ^^^^^^^ `generateCaptcha` is declared here\n  35 |\n  36 |     const handleSubmit = async (e: React.FormEvent) => {\n  37 |         e.preventDefault();","line":23,"column":9,"nodeType":null,"endLine":23,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Mail, Lock, ArrowLeft, LogIn } from 'lucide-react';\r\nimport Card from '../../../components/ui/Card';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { useAuth } from '../../../context/AuthContext';\r\n\r\nconst CitizenLogin: React.FC = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    // Captcha State\r\n    const [captcha, setCaptcha] = useState({ problem: '', answer: 0 });\r\n    const [enteredCaptcha, setEnteredCaptcha] = useState('');\r\n\r\n    const { login, isLoading } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    // Generate Captcha on Mount\r\n    React.useEffect(() => {\r\n        generateCaptcha();\r\n    }, []);\r\n\r\n    const generateCaptcha = () => {\r\n        const num1 = Math.floor(Math.random() * 10); // 0-9\r\n        const num2 = Math.floor(Math.random() * 10); // 0-9\r\n        setCaptcha({\r\n            problem: `${num1} + ${num2}`,\r\n            answer: num1 + num2\r\n        });\r\n        setEnteredCaptcha('');\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (parseInt(enteredCaptcha) !== captcha.answer) {\r\n            setError('Incorrect Captcha answer. Please try again.');\r\n            generateCaptcha();\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await login(email, password);\r\n            navigate('/citizen/dashboard');\r\n        } catch (err) {\r\n            setError((err as Error).message);\r\n            generateCaptcha(); // Refresh on error too for security\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative overflow-hidden\">\r\n            {/* Decorative Elements */}\r\n            <div className=\"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30\"></div>\r\n            <div className=\"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-purple-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30\"></div>\r\n\r\n            <div className=\"absolute top-6 left-6 z-10\">\r\n                <Link to=\"/auth/user-type\" className=\"flex items-center text-gray-500 hover:text-gray-900 transition-colors bg-white/50 backdrop-blur-sm px-4 py-2 rounded-full shadow-sm hover:shadow\">\r\n                    <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n                    Back\r\n                </Link>\r\n            </div>\r\n\r\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-md z-10\">\r\n                <div className=\"text-center mb-8\">\r\n                    <h2 className=\"text-3xl font-bold tracking-tight text-gray-900\">\r\n                        Welcome Back\r\n                    </h2>\r\n                    <p className=\"mt-2 text-sm text-gray-600\">\r\n                        Login to report issues and track status\r\n                    </p>\r\n                </div>\r\n\r\n                <Card className=\"backdrop-blur-xl bg-white/90 shadow-xl border-white/50\">\r\n                    <form className=\"space-y-2\" onSubmit={handleSubmit}>\r\n                        {error && (\r\n                            <div className=\"bg-red-50 text-red-600 p-3 rounded-md text-sm mb-4 border border-red-200\">\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n                        <Input\r\n                            label=\"Email Address\"\r\n                            id=\"email\"\r\n                            type=\"email\"\r\n                            placeholder=\"you@example.com\"\r\n                            required\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            icon={<Mail className=\"h-5 w-5\" />}\r\n                        />\r\n\r\n                        <Input\r\n                            label=\"Password\"\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            placeholder=\"••••••••\"\r\n                            required\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            icon={<Lock className=\"h-5 w-5\" />}\r\n                        />\r\n\r\n                        {/* Captcha Section */}\r\n                        <div className=\"bg-gray-50 p-3 rounded-xl border border-gray-200\">\r\n                            <div className=\"flex justify-between items-center mb-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700\">Security Check</label>\r\n                                <span className=\"text-xs text-gray-400\">Solve to login</span>\r\n                            </div>\r\n                            <div className=\"flex gap-2 items-center\">\r\n                                <div className=\"bg-white px-4 py-2 rounded-lg border border-gray-300 font-mono text-lg font-bold tracking-widest select-none text-gray-600 w-1/3 text-center\">\r\n                                    {captcha.problem} = ?\r\n                                </div>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"block w-2/3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n                                    placeholder=\"Answer\"\r\n                                    required\r\n                                    value={enteredCaptcha}\r\n                                    onChange={(e) => setEnteredCaptcha(e.target.value)}\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={generateCaptcha}\r\n                                    className=\"p-2 text-gray-500 hover:text-blue-600 transition-colors\"\r\n                                    title=\"Refresh Captcha\"\r\n                                >\r\n                                    <ArrowLeft className=\"h-4 w-4 rotate-180\" /> {/* Refresh icon hack */}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-between py-2\">\r\n                            {/* ... (Previous code) ... */}\r\n                            <div className=\"flex items-center\">\r\n                                <input\r\n                                    id=\"remember-me\"\r\n                                    name=\"remember-me\"\r\n                                    type=\"checkbox\"\r\n                                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                                />\r\n                                <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-700\">\r\n                                    Remember me\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-2\">\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                isLoading={isLoading}\r\n                                icon={<LogIn className=\"h-5 w-5\" />}\r\n                            >\r\n                                Sign In\r\n                            </Button>\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"mt-6 text-center\">\r\n                        <p className=\"text-sm text-gray-600\">\r\n                            New to FixMyCity?{' '}\r\n                            <Link to=\"/auth/citizen/register\" className=\"font-semibold text-blue-600 hover:text-blue-500 hover:underline\">\r\n                                Create an account\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CitizenLogin;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\citizen\\Register.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\employee\\Login.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`generateCaptcha` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\employee\\Login.tsx:23:9\n  21 |     // Generate Captcha on Mount\n  22 |     React.useEffect(() => {\n> 23 |         generateCaptcha();\n     |         ^^^^^^^^^^^^^^^ `generateCaptcha` accessed before it is declared\n  24 |     }, []);\n  25 |\n  26 |     const generateCaptcha = () => {\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\employee\\Login.tsx:26:5\n  24 |     }, []);\n  25 |\n> 26 |     const generateCaptcha = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 27 |         const num1 = Math.floor(Math.random() * 10);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 28 |         const num2 = Math.floor(Math.random() * 10);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 29 |         setCaptcha({\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 30 |             problem: `${num1} + ${num2}`,\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 31 |             answer: num1 + num2\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 32 |         });\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 33 |         setEnteredCaptcha('');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 34 |     };\n     | ^^^^^^^ `generateCaptcha` is declared here\n  35 |\n  36 |     const handleSubmit = async (e: React.FormEvent) => {\n  37 |         e.preventDefault();","line":23,"column":9,"nodeType":null,"endLine":23,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { Mail, Lock, ArrowLeft, LogIn } from 'lucide-react';\r\nimport Card from '../../../components/ui/Card';\r\nimport Button from '../../../components/ui/Button';\r\nimport Input from '../../../components/ui/Input';\r\nimport { useAuth } from '../../../context/AuthContext';\r\n\r\nconst EmployeeLogin: React.FC = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    // Captcha State\r\n    const [captcha, setCaptcha] = useState({ problem: '', answer: 0 });\r\n    const [enteredCaptcha, setEnteredCaptcha] = useState('');\r\n\r\n    const { login, isLoading } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    // Generate Captcha on Mount\r\n    React.useEffect(() => {\r\n        generateCaptcha();\r\n    }, []);\r\n\r\n    const generateCaptcha = () => {\r\n        const num1 = Math.floor(Math.random() * 10);\r\n        const num2 = Math.floor(Math.random() * 10);\r\n        setCaptcha({\r\n            problem: `${num1} + ${num2}`,\r\n            answer: num1 + num2\r\n        });\r\n        setEnteredCaptcha('');\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError('');\r\n\r\n        if (parseInt(enteredCaptcha) !== captcha.answer) {\r\n            setError('Incorrect Captcha answer. Please try again.');\r\n            generateCaptcha();\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await login(email, password);\r\n            // Basic check to ensure it's an employee (in real app, use role from auth)\r\n            navigate('/employee/dashboard');\r\n        } catch (err) {\r\n            setError((err as Error).message);\r\n            generateCaptcha();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8 relative overflow-hidden\">\r\n            <div className=\"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-green-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30\"></div>\r\n            <div className=\"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-teal-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30\"></div>\r\n\r\n            <div className=\"absolute top-6 left-6 z-10\">\r\n                <Link to=\"/auth/user-type\" className=\"flex items-center text-gray-500 hover:text-gray-900 transition-colors bg-white/50 backdrop-blur-sm px-4 py-2 rounded-full shadow-sm hover:shadow\">\r\n                    <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n                    Back\r\n                </Link>\r\n            </div>\r\n\r\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-md z-10\">\r\n                <div className=\"text-center mb-8\">\r\n                    <h2 className=\"text-3xl font-bold tracking-tight text-gray-900\">\r\n                        Employee Portal\r\n                    </h2>\r\n                    <p className=\"mt-2 text-sm text-gray-600\">\r\n                        Login to access administrative tools\r\n                    </p>\r\n                </div>\r\n\r\n                <Card className=\"backdrop-blur-xl bg-white/90 shadow-xl border-white/50 border-t-4 border-t-emerald-500\">\r\n                    <form className=\"space-y-4\" onSubmit={handleSubmit}>\r\n                        {error && (\r\n                            <div className=\"bg-red-50 text-red-600 p-3 rounded-md text-sm border border-red-200\">\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n                        <Input\r\n                            label=\"Official Email\"\r\n                            id=\"email\"\r\n                            type=\"email\"\r\n                            placeholder=\"officer@municipality.gov\"\r\n                            required\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            icon={<Mail className=\"h-5 w-5\" />}\r\n                        />\r\n\r\n                        <Input\r\n                            label=\"Password\"\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            placeholder=\"••••••••\"\r\n                            required\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            icon={<Lock className=\"h-5 w-5\" />}\r\n                        />\r\n\r\n                        {/* Captcha Section */}\r\n                        <div className=\"bg-gray-50 p-3 rounded-xl border border-gray-200\">\r\n                            <div className=\"flex justify-between items-center mb-2\">\r\n                                <label className=\"block text-sm font-medium text-gray-700\">Security Check</label>\r\n                                <span className=\"text-xs text-gray-400\">Solve to login</span>\r\n                            </div>\r\n                            <div className=\"flex gap-2 items-center\">\r\n                                <div className=\"bg-white px-4 py-2 rounded-lg border border-gray-300 font-mono text-lg font-bold tracking-widest select-none text-gray-600 w-1/3 text-center\">\r\n                                    {captcha.problem} = ?\r\n                                </div>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"block w-2/3 rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500\"\r\n                                    placeholder=\"Answer\"\r\n                                    required\r\n                                    value={enteredCaptcha}\r\n                                    onChange={(e) => setEnteredCaptcha(e.target.value)}\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={generateCaptcha}\r\n                                    className=\"p-2 text-gray-500 hover:text-emerald-600 transition-colors\"\r\n                                    title=\"Refresh Captcha\"\r\n                                >\r\n                                    <ArrowLeft className=\"h-4 w-4 rotate-180\" />\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-2\">\r\n                            <Button\r\n                                type=\"submit\"\r\n                                fullWidth\r\n                                variant=\"secondary\"\r\n                                isLoading={isLoading}\r\n                                icon={<LogIn className=\"h-5 w-5\" />}\r\n                            >\r\n                                Access Portal\r\n                            </Button>\r\n                        </div>\r\n                    </form>\r\n                    <div className=\"mt-6 text-center\">\r\n                        <p className=\"text-sm text-gray-600\">\r\n                            New Employee?{' '}\r\n                            <Link to=\"/auth/employee/register\" className=\"font-semibold text-emerald-600 hover:text-emerald-500 hover:underline\">\r\n                                Register here\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EmployeeLogin;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\auth\\employee\\Register.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\ComplaintConfirmation.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Math.random` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\ComplaintConfirmation.tsx:8:45\n   6 |\n   7 | const ComplaintConfirmation: React.FC = () => {\n>  8 |     const complaintId = \"CMP-\" + Math.floor(Math.random() * 10000);\n     |                                             ^^^^^^^^^^^^^ Cannot call impure function\n   9 |     const date = new Date().toLocaleDateString();\n  10 |\n  11 |     return (","line":8,"column":45,"nodeType":null,"endLine":8,"endColumn":58}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { CheckCircle, Home, Plus } from 'lucide-react';\r\nimport Card from '../../components/ui/Card';\r\nimport Button from '../../components/ui/Button';\r\n\r\nconst ComplaintConfirmation: React.FC = () => {\r\n    const complaintId = \"CMP-\" + Math.floor(Math.random() * 10000);\r\n    const date = new Date().toLocaleDateString();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6 flex flex-col items-center justify-center text-center relative overflow-hidden\">\r\n            {/* Confetti / Decoration */}\r\n            <div className=\"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute top-[20%] left-[20%] w-4 h-4 bg-red-400 rounded-full animate-bounce delay-100\"></div>\r\n                <div className=\"absolute top-[30%] right-[30%] w-3 h-3 bg-blue-400 rounded-sm animate-spin delay-300\"></div>\r\n                <div className=\"absolute bottom-[20%] left-[40%] w-5 h-5 bg-green-400 rounded-full animate-pulse delay-500\"></div>\r\n            </div>\r\n\r\n            <Card className=\"w-full max-w-md relative z-10 !border-t-4 !border-t-green-500\">\r\n                <div className=\"mb-6 inline-flex p-4 rounded-full bg-green-50 shadow-inner\">\r\n                    <div className=\"p-3 bg-green-100 rounded-full\">\r\n                        <CheckCircle className=\"h-10 w-10 text-green-600\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Submitted!</h1>\r\n                <p className=\"text-gray-500 mb-8\">\r\n                    Your complaint has been registered successfully.\r\n                </p>\r\n\r\n                <div className=\"bg-gray-50 rounded-xl p-6 mb-8 text-left space-y-4 border border-gray-100\">\r\n                    <div className=\"flex justify-between items-center border-b border-gray-200 pb-3\">\r\n                        <span className=\"text-sm text-gray-500 font-medium\">Complaint ID</span>\r\n                        <span className=\"font-mono font-bold text-gray-900 bg-white px-2 py-1 rounded border border-gray-200\">{complaintId}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center border-b border-gray-200 pb-3\">\r\n                        <span className=\"text-sm text-gray-500 font-medium\">Date</span>\r\n                        <span className=\"font-medium text-gray-900\">{date}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <span className=\"text-sm text-gray-500 font-medium\">Status</span>\r\n                        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                            Expected Resolution: 3 Days\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                    <Link to=\"/citizen/dashboard\">\r\n                        <Button variant=\"primary\" fullWidth icon={<Home className=\"h-4 w-4\" />}>\r\n                            Back to Dashboard\r\n                        </Button>\r\n                    </Link>\r\n                    <Link to=\"/citizen/report-issue\">\r\n                        <Button variant=\"outline\" fullWidth icon={<Plus className=\"h-4 w-4\" />}>\r\n                            Report Another Issue\r\n                        </Button>\r\n                    </Link>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComplaintConfirmation;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\ComplaintDetails.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\ComplaintsList.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\ComplaintsList.tsx:15:9\n  13 |\n  14 |     useEffect(() => {\n> 15 |         setComplaints(db.getComplaints());\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  16 |     }, []);\n  17 |\n  18 |     const filteredComplaints = complaints.filter(c => {","line":15,"column":9,"nodeType":null,"endLine":15,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Search, ChevronRight, Clock, MapPin } from 'lucide-react';\r\nimport Card from '../../components/ui/Card';\r\nimport Input from '../../components/ui/Input';\r\nimport { db } from '../../services/storage';\r\nimport type { Complaint } from '../../services/storage';\r\n\r\nconst ComplaintsList: React.FC = () => {\r\n    const [filter, setFilter] = useState('All');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [complaints, setComplaints] = useState<Complaint[]>([]);\r\n\r\n    useEffect(() => {\r\n        setComplaints(db.getComplaints());\r\n    }, []);\r\n\r\n    const filteredComplaints = complaints.filter(c => {\r\n        const matchesFilter = filter === 'All' || c.status === filter;\r\n        const matchesSearch = c.type.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            c.location.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n            c.id.toLowerCase().includes(searchTerm.toLowerCase());\r\n        return matchesFilter && matchesSearch;\r\n    });\r\n\r\n    return (\r\n        <div className=\"p-4 max-w-7xl mx-auto space-y-6\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">My Complaints</h1>\r\n                <div className=\"flex gap-2 overflow-x-auto pb-2 md:pb-0\">\r\n                    {['All', 'Submitted', 'In Progress', 'Resolved'].map((status) => (\r\n                        <button\r\n                            key={status}\r\n                            onClick={() => setFilter(status)}\r\n                            className={`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${filter === status\r\n                                ? 'bg-blue-600 text-white shadow-md'\r\n                                : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'\r\n                                }`}\r\n                        >\r\n                            {status}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            <Input\r\n                placeholder=\"Search complaints...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                icon={<Search className=\"h-5 w-5\" />}\r\n                fullWidth\r\n            />\r\n\r\n            <div className=\"space-y-4\">\r\n                {filteredComplaints.length > 0 ? (\r\n                    filteredComplaints.map((complaint) => (\r\n                        <Link\r\n                            key={complaint.id}\r\n                            to={`/citizen/complaint/${complaint.id}`}\r\n                            className=\"block group\"\r\n                        >\r\n                            <Card className=\"hover:border-blue-300 transition-colors\" padding=\"md\">\r\n                                <div className=\"flex justify-between items-start\">\r\n                                    <div className=\"flex-grow\">\r\n                                        <div className=\"flex justify-between items-center mb-2\">\r\n                                            <span className=\"font-bold text-gray-900 text-lg group-hover:text-blue-600 transition-colors\">{complaint.type}</span>\r\n                                            <span className={`px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wide ${complaint.status === 'Resolved' ? 'bg-green-100 text-green-700' :\r\n                                                complaint.status === 'In Progress' ? 'bg-yellow-100 text-yellow-700' :\r\n                                                    'bg-blue-100 text-blue-700'\r\n                                                }`}>\r\n                                                {complaint.status}\r\n                                            </span>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex items-center text-sm text-gray-500 mb-3\">\r\n                                            <MapPin className=\"h-4 w-4 mr-1 text-gray-400\" />\r\n                                            {complaint.location}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex items-center text-xs text-gray-400 border-t pt-3 border-gray-100\">\r\n                                            <Clock className=\"h-3 w-3 mr-1\" />\r\n                                            {complaint.date}\r\n                                            <span className=\"mx-2\">•</span>\r\n                                            <span className=\"font-mono bg-gray-100 px-1.5 py-0.5 rounded text-gray-500\">{complaint.id}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <ChevronRight className=\"h-5 w-5 text-gray-300 group-hover:text-blue-500 group-hover:translate-x-1 transition-all ml-4 self-center\" />\r\n                                </div>\r\n                            </Card>\r\n                        </Link>\r\n                    ))\r\n                ) : (\r\n                    <div className=\"text-center py-16 bg-white rounded-2xl border border-dashed border-gray-300\">\r\n                        <div className=\"bg-gray-50 h-16 w-16 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <Search className=\"h-8 w-8 text-gray-400\" />\r\n                        </div>\r\n                        <p className=\"text-gray-500 font-medium\">No complaints found matching your search.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ComplaintsList;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\Profile.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\Profile.tsx:20:13\n  18 |     useEffect(() => {\n  19 |         if (user) {\n> 20 |             setFormData({\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  21 |                 name: user.name,\n  22 |                 phone: user.phone || '',\n  23 |                 email: user.email","line":20,"column":13,"nodeType":null,"endLine":20,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { User, Mail, Phone, LogOut, Award, Shield, Edit2, Save, X } from 'lucide-react';\r\nimport Card from '../../components/ui/Card';\r\nimport Input from '../../components/ui/Input';\r\nimport Button from '../../components/ui/Button';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { db } from '../../services/storage';\r\n\r\nconst CitizenProfile: React.FC = () => {\r\n    const { user, logout, updateProfile } = useAuth();\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        phone: '',\r\n        email: ''\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setFormData({\r\n                name: user.name,\r\n                phone: user.phone || '',\r\n                email: user.email\r\n            });\r\n        }\r\n    }, [user]);\r\n\r\n    const handleSave = () => {\r\n        if (!user) return;\r\n        updateProfile({\r\n            name: formData.name,\r\n            phone: formData.phone\r\n        });\r\n        setIsEditing(false);\r\n    };\r\n\r\n    if (!user) return <div className=\"p-8 text-center\">Please login to view profile.</div>;\r\n\r\n    // Calc Stats\r\n    const complaints = db.getComplaints().filter(c => c.userId === user.id);\r\n    const resolved = complaints.filter(c => c.status === 'Resolved').length;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pb-20\">\r\n            {/* Header / Banner */}\r\n            <div className=\"bg-gradient-primary h-48 relative overflow-hidden\">\r\n                <div className=\"absolute top-0 right-0 w-64 h-64 bg-white opacity-10 rounded-full -translate-y-1/2 translate-x-1/2 blur-2xl\"></div>\r\n                <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-black opacity-10 rounded-full translate-y-1/2 -translate-x-1/2 blur-2xl\"></div>\r\n            </div>\r\n\r\n            <div className=\"max-w-3xl mx-auto px-4 -mt-20\">\r\n                <div className=\"flex flex-col items-center\">\r\n                    <div className=\"h-32 w-32 bg-white rounded-full p-2 shadow-xl border-4 border-white/50 backdrop-blur-sm relative group\">\r\n                        <div className=\"h-full w-full bg-blue-100 rounded-full flex items-center justify-center text-primary overflow-hidden\">\r\n                            {/* Placeholder Avatar */}\r\n                            <span className=\"text-4xl font-bold\">{user.name.charAt(0).toUpperCase()}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-center mt-4 mb-8\">\r\n                        <h1 className=\"text-2xl font-bold text-gray-900\">{user.name}</h1>\r\n                        <p className=\"text-gray-500\">Citizen • {user.email}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {/* Impact Stats */}\r\n                    <Card className=\"bg-gradient-to-r from-blue-600 to-indigo-700 text-white border-none shadow-lg\">\r\n                        <div className=\"flex justify-around items-center py-2\">\r\n                            <div className=\"text-center\">\r\n                                <div className=\"flex items-center justify-center h-10 w-10 bg-white/20 rounded-full mx-auto mb-2 backdrop-blur-lg\">\r\n                                    <Award className=\"h-5 w-5\" />\r\n                                </div>\r\n                                <div className=\"text-2xl font-bold\">{complaints.length}</div>\r\n                                <div className=\"text-xs font-medium opacity-80 uppercase tracking-wider\">Reports</div>\r\n                            </div>\r\n                            <div className=\"w-px h-12 bg-white/20\"></div>\r\n                            <div className=\"text-center\">\r\n                                <div className=\"flex items-center justify-center h-10 w-10 bg-white/20 rounded-full mx-auto mb-2 backdrop-blur-lg\">\r\n                                    <Shield className=\"h-5 w-5\" />\r\n                                </div>\r\n                                <div className=\"text-2xl font-bold\">{resolved}</div>\r\n                                <div className=\"text-xs font-medium opacity-80 uppercase tracking-wider\">Resolved</div>\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n\r\n                    <Card>\r\n                        <div className=\"flex justify-between items-center mb-4 border-b border-gray-100 pb-2\">\r\n                            <h3 className=\"text-gray-900 font-bold\">Personal Information</h3>\r\n                            {!isEditing ? (\r\n                                <button onClick={() => setIsEditing(true)} className=\"text-blue-600 hover:bg-blue-50 p-2 rounded-full transition-colors\">\r\n                                    <Edit2 className=\"h-4 w-4\" />\r\n                                </button>\r\n                            ) : (\r\n                                <div className=\"flex gap-2\">\r\n                                    <button onClick={() => setIsEditing(false)} className=\"text-gray-400 hover:bg-gray-100 p-2 rounded-full transition-colors\">\r\n                                        <X className=\"h-4 w-4\" />\r\n                                    </button>\r\n                                    <button onClick={handleSave} className=\"text-green-600 hover:bg-green-50 p-2 rounded-full transition-colors\">\r\n                                        <Save className=\"h-4 w-4\" />\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                            {!isEditing ? (\r\n                                <>\r\n                                    <div className=\"flex items-center p-3 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                                        <div className=\"bg-blue-50 p-2 rounded-full mr-4\">\r\n                                            <User className=\"h-5 w-5 text-blue-600\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"text-xs text-gray-500 font-medium uppercase\">Full Name</p>\r\n                                            <p className=\"text-gray-900 font-medium\">{user.name}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center p-3 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                                        <div className=\"bg-blue-50 p-2 rounded-full mr-4\">\r\n                                            <Mail className=\"h-5 w-5 text-blue-600\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"text-xs text-gray-500 font-medium uppercase\">Email</p>\r\n                                            <p className=\"text-gray-900 font-medium\">{user.email}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex items-center p-3 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                                        <div className=\"bg-blue-50 p-2 rounded-full mr-4\">\r\n                                            <Phone className=\"h-5 w-5 text-blue-600\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1\">\r\n                                            <p className=\"text-xs text-gray-500 font-medium uppercase\">Phone</p>\r\n                                            <p className=\"text-gray-900 font-medium\">{user.phone || 'Not Set'}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <div className=\"space-y-4 animate-fade-in\">\r\n                                    <Input\r\n                                        label=\"Full Name\"\r\n                                        value={formData.name}\r\n                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                                        icon={<User className=\"h-5 w-5\" />}\r\n                                    />\r\n                                    <Input\r\n                                        label=\"Phone Number\"\r\n                                        value={formData.phone}\r\n                                        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\r\n                                        icon={<Phone className=\"h-5 w-5\" />}\r\n                                    />\r\n                                    <div className=\"opacity-50 pointer-events-none\">\r\n                                        <Input\r\n                                            label=\"Email (Cannot be changed)\"\r\n                                            value={formData.email}\r\n                                            readOnly\r\n                                            icon={<Mail className=\"h-5 w-5\" />}\r\n                                        />\r\n                                    </div>\r\n                                    <Button onClick={handleSave} fullWidth icon={<Save className=\"h-4 w-4\" />}>Save Changes</Button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </Card>\r\n\r\n                    <div className=\"space-y-3\">\r\n                        <button\r\n                            onClick={logout}\r\n                            className=\"w-full flex items-center justify-center p-4 bg-red-50 text-red-600 font-bold rounded-2xl hover:bg-red-100 transition-colors\"\r\n                        >\r\n                            <LogOut className=\"h-5 w-5 mr-2\" />\r\n                            Sign Out\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"text-center text-xs text-gray-400 pb-4\">\r\n                        Version 1.0.0 • FixMyCity Inc.\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CitizenProfile;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\citizen\\ReportIssue.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\AllComplaints.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\AllComplaints.tsx:15:9\n  13 |\n  14 |     useEffect(() => {\n> 15 |         setComplaints(db.getComplaints());\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  16 |     }, []);\n  17 |\n  18 |     const filteredComplaints = complaints.filter(c =>","line":15,"column":9,"nodeType":null,"endLine":15,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Download, Search, Filter, MapPin, Calendar } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport Card from '../../components/ui/Card';\r\nimport Input from '../../components/ui/Input';\r\nimport Button from '../../components/ui/Button';\r\nimport { db } from '../../services/storage';\r\nimport type { Complaint } from '../../services/storage';\r\n\r\nconst AllComplaints: React.FC = () => {\r\n    const [complaints, setComplaints] = useState<Complaint[]>([]);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    useEffect(() => {\r\n        setComplaints(db.getComplaints());\r\n    }, []);\r\n\r\n    const filteredComplaints = complaints.filter(c =>\r\n        c.id.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.type.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.location.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    const handleExport = () => {\r\n        const csvContent = \"data:text/csv;charset=utf-8,\"\r\n            + \"ID,Type,Location,Status,Date\\n\"\r\n            + complaints.map(row => `${row.id},${row.type},${row.location},${row.status},${row.date}`).join(\"\\n\");\r\n\r\n        const encodedUri = encodeURI(csvContent);\r\n        const link = document.createElement(\"a\");\r\n        link.setAttribute(\"href\", encodedUri);\r\n        link.setAttribute(\"download\", \"complaints_report.csv\");\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    };\r\n\r\n    return (\r\n        <div className=\"p-4 max-w-7xl mx-auto space-y-6 pb-24\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Department Overview</h1>\r\n                    <p className=\"text-gray-500 text-sm\">All complaints across zones</p>\r\n                </div>\r\n                <Button\r\n                    variant=\"outline\"\r\n                    icon={<Download className=\"h-4 w-4\" />}\r\n                    onClick={handleExport}\r\n                >\r\n                    Export Report\r\n                </Button>\r\n            </div>\r\n\r\n            <Card padding=\"sm\" className=\"space-y-4\">\r\n                <div className=\"flex gap-4 flex-col md:flex-row\">\r\n                    <div className=\"flex-grow\">\r\n                        <Input\r\n                            placeholder=\"Search records...\"\r\n                            icon={<Search className=\"h-4 w-4\" />}\r\n                            className=\"mb-0\"\r\n                            fullWidth\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                        <Button variant=\"outline\" icon={<Filter className=\"h-4 w-4\" />}>Filter</Button>\r\n                        <Button variant=\"outline\" icon={<Calendar className=\"h-4 w-4\" />}>Date</Button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full divide-y divide-gray-200\">\r\n                        <thead className=\"bg-gray-50\">\r\n                            <tr>\r\n                                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Complaint Details</th>\r\n                                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Location</th>\r\n                                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\r\n                                <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                                <th scope=\"col\" className=\"relative px-6 py-3\"><span className=\"sr-only\">Actions</span></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                            {filteredComplaints.length > 0 ? (\r\n                                filteredComplaints.map((complaint) => (\r\n                                    <tr key={complaint.id} className=\"hover:bg-gray-50 transition-colors group\">\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"flex items-center\">\r\n                                                <div>\r\n                                                    <div className=\"text-sm font-bold text-gray-900\">{complaint.type}</div>\r\n                                                    <div className=\"text-xs text-gray-500 font-mono\">{complaint.id}</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <div className=\"flex items-center text-sm text-gray-500\">\r\n                                                <MapPin className=\"h-3 w-3 mr-1 text-gray-400\" />\r\n                                                {complaint.location}\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                            {complaint.date}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${complaint.status === 'Resolved' ? 'bg-green-100 text-green-800' :\r\n                                                complaint.status === 'In Progress' ? 'bg-yellow-100 text-yellow-800' :\r\n                                                    'bg-blue-100 text-blue-800'\r\n                                                }`}>\r\n                                                {complaint.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                                            <Link\r\n                                                to={`/employee/complaint/${complaint.id}/manage`}\r\n                                                className=\"text-secondary hover:text-green-900 font-bold\"\r\n                                            >\r\n                                                View\r\n                                            </Link>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                <tr>\r\n                                    <td colSpan={5} className=\"px-6 py-10 text-center text-gray-500\">\r\n                                        No complaints found\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </Card>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AllComplaints;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\AssignedComplaints.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\Dashboard.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\Dashboard.tsx:26:9\n  24 |         const overdue = complaints.filter(c => c.status !== 'Resolved' && new Date(c.date) < new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)).length;\n  25 |\n> 26 |         setStats({ assigned, pending, resolved, overdue });\n     |         ^^^^^^^^ Avoid calling setState() directly within an effect\n  27 |\n  28 |         // Get Recent Tasks\n  29 |         setRecentAssigned(complaints.filter(c => c.status !== 'Resolved').slice(0, 5));","line":26,"column":9,"nodeType":null,"endLine":26,"endColumn":17}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { AlertCircle, CheckCircle, Clock } from 'lucide-react';\r\nimport Card from '../../components/ui/Card';\r\nimport { db } from '../../services/storage';\r\nimport type { Complaint } from '../../services/storage';\r\n\r\nconst EmployeeDashboard: React.FC = () => {\r\n    const [stats, setStats] = useState({\r\n        assigned: 0,\r\n        pending: 0,\r\n        resolved: 0,\r\n        overdue: 0\r\n    });\r\n    const [recentAssigned, setRecentAssigned] = useState<Complaint[]>([]);\r\n\r\n    useEffect(() => {\r\n        const complaints = db.getComplaints();\r\n\r\n        // Calculate Stats\r\n        const assigned = complaints.filter(c => c.status === 'Assigned').length;\r\n        const pending = complaints.filter(c => c.status === 'In Progress' || c.status === 'Submitted').length;\r\n        const resolved = complaints.filter(c => c.status === 'Resolved').length;\r\n        const overdue = complaints.filter(c => c.status !== 'Resolved' && new Date(c.date) < new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)).length;\r\n\r\n        setStats({ assigned, pending, resolved, overdue });\r\n\r\n        // Get Recent Tasks\r\n        setRecentAssigned(complaints.filter(c => c.status !== 'Resolved').slice(0, 5));\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"px-4 py-8 max-w-7xl mx-auto space-y-8\">\r\n            {/* Header */}\r\n            <div className=\"flex justify-between items-end\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-gray-900\">Dashboard</h1>\r\n                    <p className=\"text-gray-600 mt-1\">Hello, Officer Sharma (Sanitation)</p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <Card className=\"border-l-4 border-l-blue-500 bg-blue-50/50\" padding=\"md\">\r\n                    <div className=\"flex justify-between items-start mb-2\">\r\n                        <span className=\"text-gray-500 text-xs font-bold uppercase tracking-wide\">Assigned</span>\r\n                        <div className=\"p-1.5 bg-blue-100 rounded-lg\">\r\n                            <Clock className=\"h-4 w-4 text-blue-600\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-3xl font-bold text-gray-900\">{stats.assigned}</div>\r\n                </Card>\r\n\r\n                <Card className=\"border-l-4 border-l-red-500 bg-red-50/50\" padding=\"md\">\r\n                    <div className=\"flex justify-between items-start mb-2\">\r\n                        <span className=\"text-gray-500 text-xs font-bold uppercase tracking-wide\">Overdue</span>\r\n                        <div className=\"p-1.5 bg-red-100 rounded-lg\">\r\n                            <AlertCircle className=\"h-4 w-4 text-red-600\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-3xl font-bold text-gray-900\">{stats.overdue}</div>\r\n                </Card>\r\n\r\n                <Card className=\"border-l-4 border-l-green-500 bg-green-50/50\" padding=\"md\">\r\n                    <div className=\"flex justify-between items-start mb-2\">\r\n                        <span className=\"text-gray-500 text-xs font-bold uppercase tracking-wide\">Resolved</span>\r\n                        <div className=\"p-1.5 bg-green-100 rounded-lg\">\r\n                            <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-3xl font-bold text-gray-900\">{stats.resolved}</div>\r\n                </Card>\r\n\r\n                <Card className=\"border-l-4 border-l-yellow-500 bg-yellow-50/50\" padding=\"md\">\r\n                    <div className=\"flex justify-between items-start mb-2\">\r\n                        <span className=\"text-gray-500 text-xs font-bold uppercase tracking-wide\">Pending</span>\r\n                        <div className=\"p-1.5 bg-yellow-100 rounded-lg\">\r\n                            <Clock className=\"h-4 w-4 text-yellow-600\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"text-3xl font-bold text-gray-900\">{stats.pending}</div>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Detailed task list */}\r\n            <div>\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <h2 className=\"text-lg font-bold text-gray-900\">Priority Tasks</h2>\r\n                    <Link to=\"/employee/assigned-complaints\" className=\"text-secondary hover:text-green-700 text-sm font-medium transition-colors\">\r\n                        View All\r\n                    </Link>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    {recentAssigned.length > 0 ? (\r\n                        recentAssigned.map((complaint) => (\r\n                            <Link\r\n                                key={complaint.id}\r\n                                to={`/employee/complaint/${complaint.id}/manage`}\r\n                                className=\"block group\"\r\n                            >\r\n                                <Card className=\"hover:border-green-300 transition-all border-l-4 border-l-transparent hover:border-l-green-500\" padding=\"md\">\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <div>\r\n                                            <div className=\"flex items-center space-x-2 mb-1\">\r\n                                                <h3 className=\"font-bold text-gray-900 group-hover:text-secondary transition-colors\">{complaint.type}</h3>\r\n                                                {complaint.priority === 'High' && (\r\n                                                    <span className=\"bg-red-100 text-red-700 text-[10px] px-2 py-0.5 rounded-full font-bold uppercase\">High Priority</span>\r\n                                                )}\r\n                                            </div>\r\n                                            <p className=\"text-sm text-gray-500\">{complaint.location}</p>\r\n                                        </div>\r\n                                        <div className=\"text-right\">\r\n                                            <span className={`inline-block px-2.5 py-1 rounded-lg text-xs font-bold ${complaint.status === 'In Progress' ? 'bg-yellow-100 text-yellow-800' : 'bg-blue-100 text-blue-800'\r\n                                                }`}>\r\n                                                {complaint.status}\r\n                                            </span>\r\n                                            <p className=\"text-xs text-gray-400 mt-2 font-medium\">Due soon</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </Card>\r\n                            </Link>\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"text-center py-8 text-gray-500\">No active tasks found.</div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EmployeeDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\ManageComplaint.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`stopCamera` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\ManageComplaint.tsx:36:13\n  34 |         }\n  35 |         return () => {\n> 36 |             stopCamera();\n     |             ^^^^^^^^^^ `stopCamera` accessed before it is declared\n  37 |         };\n  38 |     }, [id]);\n  39 |\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\ManageComplaint.tsx:58:5\n  56 |     };\n  57 |\n> 58 |     const stopCamera = () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 59 |         if (streamRef.current) {\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 60 |             streamRef.current.getTracks().forEach(track => track.stop());\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 61 |             streamRef.current = null;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 62 |         }\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 63 |         setIsCameraOpen(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 64 |     };\n     | ^^^^^^^ `stopCamera` is declared here\n  65 |\n  66 |     const capturePhoto = () => {\n  67 |         if (videoRef.current && canvasRef.current) {","line":36,"column":13,"nodeType":null,"endLine":36,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3246,3249],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3246,3249],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { ArrowLeft, MapPin, Camera, AlertTriangle, Send, CheckCircle, RefreshCw, X, User, Briefcase } from 'lucide-react';\r\nimport Card from '../../components/ui/Card';\r\nimport Button from '../../components/ui/Button';\r\nimport { db } from '../../services/storage';\r\nimport { emailService } from '../../services/email';\r\nimport type { Complaint } from '../../services/storage';\r\n\r\nconst ManageComplaint: React.FC = () => {\r\n    const { id } = useParams<{ id: string }>();\r\n    const navigate = useNavigate();\r\n    const [complaint, setComplaint] = useState<Complaint | null>(null);\r\n    const [status, setStatus] = useState('In Progress');\r\n    const [note, setNote] = useState('');\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n\r\n    // Camera State\r\n    const [isCameraOpen, setIsCameraOpen] = useState(false);\r\n    const [capturedImage, setCapturedImage] = useState<string | null>(null);\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const streamRef = useRef<MediaStream | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            // Find in DB\r\n            const all = db.getComplaints();\r\n            const found = all.find(c => c.id === id);\r\n            if (found) {\r\n                setComplaint(found);\r\n                setStatus(found.status);\r\n            }\r\n        }\r\n        return () => {\r\n            stopCamera();\r\n        };\r\n    }, [id]);\r\n\r\n    const startCamera = async () => {\r\n        setCapturedImage(null);\r\n        setIsCameraOpen(true);\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({\r\n                video: { facingMode: 'environment' }\r\n            });\r\n            streamRef.current = stream;\r\n            if (videoRef.current) {\r\n                videoRef.current.srcObject = stream;\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error accessing camera:\", err);\r\n            alert(\"Unable to access camera or permission denied.\");\r\n            setIsCameraOpen(false);\r\n        }\r\n    };\r\n\r\n    const stopCamera = () => {\r\n        if (streamRef.current) {\r\n            streamRef.current.getTracks().forEach(track => track.stop());\r\n            streamRef.current = null;\r\n        }\r\n        setIsCameraOpen(false);\r\n    };\r\n\r\n    const capturePhoto = () => {\r\n        if (videoRef.current && canvasRef.current) {\r\n            const video = videoRef.current;\r\n            const canvas = canvasRef.current;\r\n            canvas.width = video.videoWidth;\r\n            canvas.height = video.videoHeight;\r\n            const context = canvas.getContext('2d');\r\n            if (context) {\r\n                context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n                const imageDataUrl = canvas.toDataURL('image/jpeg');\r\n                setCapturedImage(imageDataUrl);\r\n                stopCamera();\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleUpdate = () => {\r\n        if (!complaint) return;\r\n        setIsUpdating(true);\r\n\r\n        // Save to DB\r\n        db.updateComplaint(complaint.id, {\r\n            status: status as any,\r\n            // In a real app we would append to an updates array\r\n            updates: [\r\n                ...(complaint.updates || []),\r\n                {\r\n                    date: new Date().toISOString(),\r\n                    status,\r\n                    note,\r\n                    proof: capturedImage || undefined\r\n                }\r\n            ]\r\n        });\r\n\r\n        // Send Email Notification (if status changed or note added)\r\n        // Find user email (In real app, we fetch user by complaint.userId)\r\n        // For local demo, we assume we can fetch user or just send to 'Current User' if they are the one viewing?\r\n        // Actually, employees are managing complaints for citizens. We need the citizen's email.\r\n        const citizen = db.getUsers().find(u => u.id === complaint.userId);\r\n        if (citizen?.email) {\r\n            emailService.sendEmail({\r\n                to: citizen.email,\r\n                subject: `Complaint Status Updated: ${complaint.id}`,\r\n                body: `Dear ${citizen.name},\\n\\nThe status of your complaint (ID: ${complaint.id}) has been updated.\\n\\nNew Status: ${status}\\nUpdate Note: ${note || 'No additional notes.'}\\n\\nTrack your request on your dashboard.\\n\\n- FixMyCity Team`\r\n            });\r\n        }\r\n\r\n        setTimeout(() => {\r\n            setIsUpdating(false);\r\n            stopCamera();\r\n            navigate('/employee/all-complaints');\r\n        }, 1000);\r\n    };\r\n\r\n    if (!complaint) {\r\n        return <div className=\"p-8 text-center text-gray-500\">Complaint not found or loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pb-20\">\r\n            <header className=\"bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-10 border-b border-gray-100\">\r\n                <div className=\"px-4 h-16 flex items-center max-w-3xl mx-auto\">\r\n                    <button onClick={() => navigate(-1)} className=\"mr-4 p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors text-gray-600\">\r\n                        <ArrowLeft className=\"h-5 w-5\" />\r\n                    </button>\r\n                    <h1 className=\"text-lg font-bold text-gray-900\">Manage Complaint</h1>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"max-w-3xl mx-auto p-4 space-y-6\">\r\n                {/* Priority Alert */}\r\n                <div className=\"bg-gradient-to-r from-red-50 to-orange-50 border border-red-100 text-red-800 px-4 py-3 rounded-xl flex items-start shadow-sm\">\r\n                    <div className=\"bg-red-100 p-1.5 rounded-full mr-3 mt-0.5\">\r\n                        <AlertTriangle className=\"h-5 w-5 text-red-600\" />\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"font-bold text-sm\">Priority Attention Needed</p>\r\n                        <p className=\"text-xs text-red-700 mt-1\">Marked <span className=\"font-bold uppercase\">{complaint.priority || 'Medium'}</span>.</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Complaint Info Card */}\r\n                <div className=\"rounded-2xl overflow-hidden shadow-lg bg-white\">\r\n                    <div className=\"h-56 relative group\">\r\n                        {complaint.image ? (\r\n                            <img src={complaint.image} alt=\"Issue\" className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <div className=\"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400\">No Image</div>\r\n                        )}\r\n                        <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent\"></div>\r\n                        <div className=\"absolute bottom-4 left-4 text-white\">\r\n                            <h2 className=\"text-2xl font-bold\">{complaint.type}</h2>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-6\">\r\n                        <p className=\"text-gray-700 leading-relaxed mb-6 border-b border-gray-100 pb-6\">{complaint.description}</p>\r\n                        <div className=\"space-y-3\">\r\n                            <div className=\"flex items-start\">\r\n                                <MapPin className=\"h-5 w-5 mr-3 text-gray-400\" />\r\n                                <span className=\"text-sm font-medium text-gray-900\">{complaint.location}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Action Panel */}\r\n                <Card className=\"border-t-4 border-t-secondary space-y-8\">\r\n                    {/* Assignment Section (Zonal Head View) */}\r\n                    <div>\r\n                        <h3 className=\"font-bold text-gray-900 mb-4 flex items-center\">\r\n                            <Briefcase className=\"h-5 w-5 mr-2 text-secondary\" />\r\n                            Assign Task (Zonal Head)\r\n                        </h3>\r\n                        <div className=\"bg-gray-50 p-4 rounded-xl border border-gray-200\">\r\n                            <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2\">Select Team Member</label>\r\n                            <select\r\n                                className=\"block w-full rounded-lg border-gray-300 shadow-sm focus:border-secondary focus:ring focus:ring-secondary focus:ring-opacity-50\"\r\n                                value={complaint.assignedTo || ''}\r\n                                onChange={(e) => {\r\n                                    // In real app, this would be a separate API call. \r\n                                    // Here we update local state and db immediately for verified persistence\r\n                                    const val = e.target.value;\r\n                                    setComplaint(prev => prev ? ({ ...prev, assignedTo: val, status: 'Assigned' }) : null);\r\n                                    setStatus('Assigned'); // Auto-switch status\r\n                                    db.updateComplaint(complaint.id, { assignedTo: val, status: 'Assigned' });\r\n                                }}\r\n                            >\r\n                                <option value=\"\">-- Unassigned --</option>\r\n                                <optgroup label=\"Road Maintenance Team\">\r\n                                    <option value=\"Ramesh (Roads) - 9876500001\">Ramesh (Roads) - Ph: 9876500001</option>\r\n                                    <option value=\"Suresh (Potholes) - 9876500002\">Suresh (Potholes) - Ph: 9876500002</option>\r\n                                </optgroup>\r\n                                <optgroup label=\"Water Supply Team\">\r\n                                    <option value=\"Mahesh (Plumbing) - 9876500003\">Mahesh (Plumbing) - Ph: 9876500003</option>\r\n                                    <option value=\"Ganesh (Sewage) - 9876500004\">Ganesh (Sewage) - Ph: 9876500004</option>\r\n                                </optgroup>\r\n                                <optgroup label=\"Sanitation Team\">\r\n                                    <option value=\"Raju (Waste) - 9876500005\">Raju (Waste) - Ph: 9876500005</option>\r\n                                </optgroup>\r\n                            </select>\r\n                            {complaint.assignedTo && (\r\n                                <div className=\"mt-3 flex items-start bg-blue-50 p-3 rounded-lg text-sm text-blue-800\">\r\n                                    <User className=\"h-4 w-4 mr-2 mt-0.5\" />\r\n                                    <div>\r\n                                        <span className=\"font-bold\">Assigned to:</span> {complaint.assignedTo}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"border-t border-gray-100 pt-6\">\r\n                        <h3 className=\"font-bold text-gray-900 mb-6 flex items-center\">\r\n                            <CheckCircle className=\"h-5 w-5 mr-2 text-secondary\" />\r\n                            Update Status (Field Worker)\r\n                        </h3>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-6\">\r\n                        <div className=\"grid grid-cols-4 gap-2\">\r\n                            {['Assigned', 'In Progress', 'Resolved', 'Rejected'].map((option) => (\r\n                                <button\r\n                                    key={option}\r\n                                    onClick={() => setStatus(option)}\r\n                                    className={`py-2 px-1 text-xs font-bold rounded-lg border-2 transition-all ${status === option\r\n                                        ? 'border-secondary bg-green-50 text-secondary shadow-sm'\r\n                                        : 'border-gray-100 bg-white text-gray-500 hover:border-gray-200'\r\n                                        }`}\r\n                                >\r\n                                    {option}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-gray-700 mb-2\">Progress Note</label>\r\n                            <textarea\r\n                                rows={3}\r\n                                className=\"block w-full border-gray-200 rounded-xl bg-gray-50 focus:bg-white focus:ring-2 focus:ring-secondary focus:border-transparent p-4 text-sm resize-none\"\r\n                                placeholder=\"Details...\"\r\n                                value={note}\r\n                                onChange={(e) => setNote(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        {status === 'Resolved' && (\r\n                            <div className=\"space-y-4\">\r\n                                <label className=\"block text-sm font-bold text-gray-700\">Proof of Resolution</label>\r\n\r\n                                {!isCameraOpen && !capturedImage && (\r\n                                    <div\r\n                                        onClick={startCamera}\r\n                                        className=\"bg-gray-50 border-2 border-dashed border-gray-200 rounded-xl p-8 text-center cursor-pointer hover:border-secondary hover:bg-green-50/50 transition-colors group\"\r\n                                    >\r\n                                        <div className=\"bg-white p-3 rounded-full shadow-sm inline-block mb-3 group-hover:scale-110 transition-transform\">\r\n                                            <Camera className=\"h-6 w-6 text-secondary\" />\r\n                                        </div>\r\n                                        <p className=\"font-medium text-gray-900\">Take Photo Proof</p>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {isCameraOpen && (\r\n                                    <div className=\"relative rounded-xl overflow-hidden bg-black aspect-video flex items-center justify-center\">\r\n                                        <video ref={videoRef} autoPlay playsInline className=\"w-full h-full object-cover\" />\r\n                                        <button\r\n                                            onClick={capturePhoto}\r\n                                            className=\"absolute bottom-4 bg-white rounded-full p-4 shadow-lg hover:bg-gray-100 transition-transform hover:scale-110\"\r\n                                        >\r\n                                            <div className=\"h-4 w-4 bg-red-600 rounded-full\"></div>\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={stopCamera}\r\n                                            className=\"absolute top-4 right-4 bg-black/50 p-2 rounded-full text-white\"\r\n                                        >\r\n                                            <X className=\"h-5 w-5\" />\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {capturedImage && (\r\n                                    <div className=\"relative rounded-xl overflow-hidden aspect-video border-2 border-green-500 shadow-md\">\r\n                                        <img src={capturedImage} alt=\"Captured Proof\" className=\"w-full h-full object-cover\" />\r\n                                        <div className=\"absolute top-2 right-2 flex gap-2\">\r\n                                            <button\r\n                                                onClick={startCamera}\r\n                                                className=\"bg-white/90 p-2 rounded-full shadow hover:bg-white text-gray-700\"\r\n                                            >\r\n                                                <RefreshCw className=\"h-4 w-4\" />\r\n                                            </button>\r\n                                        </div>\r\n                                        <div className=\"absolute bottom-0 inset-x-0 bg-black/60 p-2 text-white text-xs text-center\">\r\n                                            Proof Captured\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <canvas ref={canvasRef} className=\"hidden\" />\r\n                            </div>\r\n                        )}\r\n\r\n                        <Button\r\n                            onClick={handleUpdate}\r\n                            fullWidth\r\n                            variant=\"secondary\"\r\n                            isLoading={isUpdating}\r\n                            disabled={!note || (status === 'Resolved' && !capturedImage)}\r\n                            icon={<Send className=\"h-4 w-4\" />}\r\n                        >\r\n                            Complete Update\r\n                        </Button>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManageComplaint;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\Profile.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\AADITHYA R\\FIX MY CITY\\src\\pages\\employee\\Profile.tsx:18:13\n  16 |     useEffect(() => {\n  17 |         if (user) {\n> 18 |             setFormData({\n     |             ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  19 |                 name: user.name,\n  20 |                 department: user.department || 'Sanitation'\n  21 |             });","line":18,"column":13,"nodeType":null,"endLine":18,"endColumn":24}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { Briefcase, LogOut, TrendingUp, CheckCircle, Mail, Edit2 } from 'lucide-react';\r\nimport Card from '../../components/ui/Card';\r\nimport Input from '../../components/ui/Input';\r\nimport Button from '../../components/ui/Button';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst EmployeeProfile: React.FC = () => {\r\n    const { user, logout, updateProfile } = useAuth();\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        department: 'Sanitation'\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setFormData({\r\n                name: user.name,\r\n                department: user.department || 'Sanitation'\r\n            });\r\n        }\r\n    }, [user]);\r\n\r\n    const handleSave = () => {\r\n        if (!user) return;\r\n        updateProfile({\r\n            name: formData.name,\r\n            department: formData.department\r\n        });\r\n        setIsEditing(false);\r\n    };\r\n\r\n    if (!user) return <div className=\"p-8 text-center\">Please login.</div>;\r\n\r\n    // Calc Stats (Mock for Employee as we don't track per-employee resolution count in simple DB yet)\r\n    // Actually we can count how many 'Resolved' in general if we assume one dept or assign logic\r\n    // For now, let's just make it dynamic based on *something* or random to look alive\r\n    const resolvedCount = 42;\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 pb-24\">\r\n            {/* Header Banner */}\r\n            <div className=\"bg-gradient-to-r from-emerald-600 to-teal-600 h-48 relative overflow-hidden\">\r\n                <div className=\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10\"></div>\r\n                <div className=\"absolute bottom-[-10%] right-[-5%] w-48 h-48 bg-white opacity-10 rounded-full blur-3xl\"></div>\r\n            </div>\r\n\r\n            <div className=\"max-w-3xl mx-auto px-4 -mt-20\">\r\n                {/* Profile Card */}\r\n                <div className=\"bg-white rounded-2xl shadow-xl p-6 border border-gray-100 flex flex-col items-center text-center relative overflow-hidden\">\r\n                    <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 to-teal-500\"></div>\r\n                    <div className=\"h-28 w-28 bg-white rounded-full p-2 shadow-lg mb-4 mt-2\">\r\n                        <div className=\"h-full w-full bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600\">\r\n                            <span className=\"text-4xl font-bold\">{user.name.charAt(0).toUpperCase()}</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {!isEditing ? (\r\n                        <>\r\n                            <h1 className=\"text-2xl font-bold text-gray-900\">{user.name}</h1>\r\n                            <p className=\"text-emerald-600 font-medium bg-emerald-50 px-3 py-1 rounded-full text-xs mt-2 uppercase tracking-wide\">\r\n                                {user.department || 'General Staff'}\r\n                            </p>\r\n                            <button\r\n                                onClick={() => setIsEditing(true)}\r\n                                className=\"absolute top-4 right-4 text-gray-400 hover:text-emerald-600 p-2\"\r\n                            >\r\n                                <Edit2 className=\"h-4 w-4\" />\r\n                            </button>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"w-full max-w-sm space-y-3 mt-2\">\r\n                            <Input\r\n                                label=\"Name\"\r\n                                value={formData.name}\r\n                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                            />\r\n                            <Input\r\n                                label=\"Department\"\r\n                                value={formData.department}\r\n                                onChange={(e) => setFormData({ ...formData, department: e.target.value })}\r\n                            />\r\n                            <div className=\"flex gap-2 justify-center mt-2\">\r\n                                <Button variant=\"outline\" onClick={() => setIsEditing(false)} className=\"py-2 px-4 text-xs\">Cancel</Button>\r\n                                <Button onClick={handleSave} className=\"py-2 px-4 text-xs\">Save</Button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <p className=\"text-gray-500 text-sm mt-4\">ID: EMP-{user.id.slice(0, 4).toUpperCase()}</p>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6\">\r\n                    <Card className=\"bg-gradient-to-br from-emerald-500 to-teal-600 text-white border-none shadow-lg\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <p className=\"text-emerald-100 text-xs font-bold uppercase tracking-wide\">Performance Score</p>\r\n                                <p className=\"text-3xl font-bold mt-1\">98/100</p>\r\n                                <p className=\"text-emerald-100 text-xs mt-1\">+2.4% from last month</p>\r\n                            </div>\r\n                            <div className=\"bg-white/20 p-3 rounded-xl backdrop-blur-sm\">\r\n                                <TrendingUp className=\"h-8 w-8 text-white\" />\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n\r\n                    <Card className=\"bg-white border-none shadow-md\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <p className=\"text-gray-500 text-xs font-bold uppercase tracking-wide text-left\">Tasks Resolved</p>\r\n                                <p className=\"text-3xl font-bold mt-1 text-gray-900 text-left\">{resolvedCount}</p>\r\n                                <p className=\"text-green-600 text-xs mt-1 text-left font-medium\">This Month</p>\r\n                            </div>\r\n                            <div className=\"bg-green-50 p-3 rounded-xl\">\r\n                                <CheckCircle className=\"h-8 w-8 text-green-600\" />\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                </div>\r\n\r\n                <div className=\"mt-6 space-y-6\">\r\n                    <Card>\r\n                        <h3 className=\"font-bold text-gray-900 mb-4 flex items-center\">\r\n                            <Briefcase className=\"h-4 w-4 mr-2 text-gray-400\" />\r\n                            Employment Details\r\n                        </h3>\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                                <span className=\"text-sm text-gray-500 flex items-center\"><Mail className=\"h-3 w-3 mr-2\" />Email</span>\r\n                                <span className=\"text-sm font-medium text-gray-900\">{user.email}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                                <span className=\"text-sm text-gray-500\">Zone Assignment</span>\r\n                                <span className=\"text-sm font-medium text-gray-900\">North Zone - Ward 4, 5, 6</span>\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n\r\n                    <button\r\n                        onClick={logout}\r\n                        className=\"w-full flex items-center justify-center p-4 bg-white border-2 border-red-50 text-red-600 font-bold rounded-2xl hover:bg-red-50 hover:border-red-100 transition-all shadow-sm\"\r\n                    >\r\n                        <LogOut className=\"h-5 w-5 mr-2\" />\r\n                        Log Out System\r\n                    </button>\r\n\r\n                    <div className=\"text-center text-xs text-gray-400 pb-8\">\r\n                        Municipal Employee Portal v2.1\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EmployeeProfile;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\services\\ai.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\services\\email.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\src\\services\\storage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\AADITHYA R\\FIX MY CITY\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]